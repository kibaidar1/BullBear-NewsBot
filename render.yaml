services:
  - type: web
    name: stockpulse-bot
    runtime: python
    plan: free
    buildCommand: pip install -r requirements.txt
    startCommand: python -m bot.main

    envVars:
      - key: PYTHON_VERSION
        value: 3.12.0

      - key: BOT_TOKEN
        sync: false

      - key: GNEWS_API_KEY
        sync: false

      - key: DATABASE_PATH
        value: /opt/render/project/src/data/news_bot.db

      - key: CHECK_INTERVAL
        value: 3600

      - key: GNEWS_LANGUAGE
        value: ru

      - key: GNEWS_MAX_RESULTS
        value: 15

      - key: PORT
        value: 8080

      - key: RENDER_EXTERNAL_URL
        generateValue: true

    # Disk для сохранения базы данных
    disk:
      name: bot-data
      mountPath: /opt/render/project/src/data
      sizeGB: 1

    # Healthcheck
    healthCheckPath: /health
